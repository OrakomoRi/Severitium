class LoadingScreen{constructor(t){this.name=t,this.fadeSpeed=1,this.isFading=!1,this.stars=[],this.animationFrameId=null,this.canvas=null,this.ctx=null,this.starCount=150,this.lastFrameTime=performance.now(),this.language=this.detectLanguage(),this.translations=this.getTranslations(),this.totalModules=0,this.loadedModules=0}detectLanguage(){const t=localStorage.getItem("language_store_key");return t?t.toLowerCase():navigator.language.split("-")[0].toLowerCase()}getTranslations(){const t={en:{loading:"Loading resources, please wait...",wait:"It can take up to a few minutes to load."},ru:{loading:"Загрузка ресурсов, пожалуйста, подождите...",wait:"Это может занять несколько минут."},uk:{loading:"Завантаження ресурсів, будь ласка, зачекайте...",wait:"Це може зайняти кілька хвилин."},nl:{loading:"Bronnen laden, even geduld...",wait:"Het kan een paar minuten duren om te laden."},pl:{loading:"Ładowanie zasobów, proszę czekać...",wait:"Może to potrwać kilka minut."},pt:{loading:"Carregando recursos, por favor, aguarde...",wait:"Isso pode levar alguns minutos para carregar."},de:{loading:"Ressourcen werden geladen, bitte warten...",wait:"Das Laden kann einige Minuten dauern."},ja:{loading:"リソースを読み込んでいます。お待ちください...",wait:"読み込みには数分かかる場合があります。"},es:{loading:"Cargando recursos, por favor espere...",wait:"Puede tardar hasta unos minutos en cargar."},fr:{loading:"Chargement des ressources, veuillez patienter...",wait:"Cela peut prendre quelques minutes."}};return t[this.language]||t.en}static add(t){const n=new LoadingScreen(t);return n.init(),n}init(){let t=document.createElement("div");t.className=`${this.name}--loading-screen`,t.innerHTML=`\n\t\t\t<canvas class="${this.name}--night-sky"></canvas>\n\t\t\t<div class="${this.name}--loading-banner">\n\t\t\t\t<h3 class="${this.name}--loading-header">${this.name}</h3>\n\t\t\t\t<p class="${this.name}--loading-text">${this.translations.loading}</p>\n\t\t\t\t<p class="${this.name}--loading-text">${this.translations.wait}</p>\n\t\t\t</div>\n\n\t\t\t<style>\n\t\t\t\thtml {\n\t\t\t\t\tfont-size: 16px !important;\n\t\t\t\t}\n\n\t\t\t\tbody {\n\t\t\t\t\tposition: relative;\n\t\t\t\t\theight: 100wh !important;\n\t\t\t\t\twidth: 100vw !important;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t}\n\n\t\t\t\t.${this.name}--loading-screen,\n\t\t\t\t.${this.name}--loading-screen * {\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tpadding: 0;\n\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t}\n\n\t\t\t\t.${this.name}--loading-screen {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tz-index: 9999;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.${this.name}--loading-banner {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tgap: 1rem;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tpadding: .5rem 1rem;\n\t\t\t\t\tbackground-color: rgba(0, 0, 0, .25);\n\t\t\t\t\tcolor: rgb(255, 255, 255);\n\t\t\t\t\tborder: .1rem solid rgb(75, 75, 75);\n\t\t\t\t\tborder-radius: .25rem;\n\t\t\t\t\tbackdrop-filter: blur(.5rem);\n\t\t\t\t\tz-index: 10000;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\tanimation: ${this.name}--banner-appear ${1/this.fadeSpeed}s ease-in-out;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.${this.name}--loading-header {\n\t\t\t\t\tfont-size: 2.5rem;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.${this.name}--loading-text {\n\t\t\t\t\tfont-size: 1.5rem;\n\t\t\t\t\tfont-weight: normal;\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t.${this.name}--loading-progress-container {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\tgap: .5rem;\n\t\t\t\t\tmargin-top: .5rem;\n\t\t\t\t\topacity: 0;\n\t\t\t\t\ttransform: scale(0);\n\t\t\t\t\ttransition: opacity .2s ease, transform .2s ease;\n\t\t\t\t}\n\n\t\t\t\t.${this.name}--loading-progress-container.shown {\n\t\t\t\t\topacity: 1;\n\t\t\t\t\ttransform: scale(1);\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t.${this.name}--loading-progress-bar-container {\n\t\t\t\t\twidth: 80%;\n\t\t\t\t\theight: .5rem;\n\t\t\t\t\tbackground: rgba(255, 255, 255, .2);\n\t\t\t\t\tborder-radius: .25rem;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t.${this.name}--loading-progress-bar-value {\n\t\t\t\t\twidth: 0;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tbackground:rgb(80, 150, 200);\n\t\t\t\t\ttransition: width .2s ease;\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t.${this.name}--loading-progress-text {\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tcolor: rgb(255, 255, 255);\n\t\t\t\t\tmax-width: 20%;\n\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\t}\n\n\t\t\t\t@keyframes ${this.name}--banner-appear {\n\t\t\t\t\t0% {\n\t\t\t\t\t\ttransform: translateX(-100vw) scale(.7);\n\t\t\t\t\t\topacity: .7;\n\t\t\t\t\t}\n\t\t\t\t\t80% {\n\t\t\t\t\t\ttransform: translateX(0) scale(.7);\n\t\t\t\t\t\topacity: .7;\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\ttransform: scale(1);\n\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t@keyframes ${this.name}--banner-disappear {\n\t\t\t\t\t0% {\n\t\t\t\t\t\ttransform: scale(1);\n\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t}\n\t\t\t\t\t20% {\n\t\t\t\t\t\ttransform: translateX(0) scale(.7);\n\t\t\t\t\t\topacity: .7;\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\ttransform: translateX(100vw) scale(.7);\n\t\t\t\t\t\topacity: .7;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t</style>\n\t\t`,document.body.appendChild(t),this.canvas=document.querySelector(`.${this.name}--night-sky`),this.ctx=this.canvas.getContext("2d"),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,window.addEventListener("resize",(()=>this.resizeCanvas())),this.initStars(),requestAnimationFrame(this.animate.bind(this))}initStars(){for(let t=0;t<this.starCount;t++){let t=2*Math.random()+.5,n=1/t*(.5*Math.random()+.5)/20;this.stars.push({x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,size:t,opacity:.7*Math.random()+.3,baseTwinkleSpeed:n,twinkleSpeed:n})}}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.stars=[],this.initStars()}updateGradient(){const t=this.ctx.createLinearGradient(0,0,0,this.canvas.height);t.addColorStop(0,"rgb(10, 15, 30)"),t.addColorStop(1,"rgb(10, 25, 50)"),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}fadeOut(){const t=document.querySelector(`.${this.name}--loading-banner`);t.style.animation=`${this.name}--banner-disappear ${1/this.fadeSpeed}s ease-in-out`,setTimeout((()=>{t.remove(),this.isFading=!0}),1e3/this.fadeSpeed)}animate(t){const n=(t-this.lastFrameTime)/1e3;this.lastFrameTime=t;const e=this.fadeSpeed*n*60;if(this.updateGradient(),this.stars.forEach((t=>{this.isFading?(t.opacity-=e,t.opacity<0&&(t.opacity=0)):(t.opacity+=t.twinkleSpeed*n*60,t.opacity>=1?(t.opacity=1,t.twinkleSpeed=-t.baseTwinkleSpeed*(.5*Math.random()+.5)):t.opacity<=.3&&(t.opacity=.3,t.twinkleSpeed=t.baseTwinkleSpeed*(.5*Math.random()+.5))),this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.size,0,2*Math.PI),this.ctx.fillStyle=`rgba(255, 255, 255, ${t.opacity})`,this.ctx.fill()})),this.isFading&&this.stars.every((t=>0===t.opacity))){cancelAnimationFrame(this.animationFrameId);const t=document.querySelector(`.${this.name}--loading-screen`);return t.style.transition=`opacity ${1/this.fadeSpeed}s ease-in-out`,t.style.opacity="0",void setTimeout((()=>{t.remove()}),1e3/this.fadeSpeed)}this.animationFrameId=requestAnimationFrame(this.animate.bind(this))}setTotalModules(t){this.totalModules=t;let n=document.querySelector(`.${this.name}--loading-banner`);if(!n)return;let e=document.createElement("div");e.className=`${this.name}--loading-progress-container`,e.innerHTML=`\n\t\t\t<div class="${this.name}--loading-progress-bar-container">\n\t\t\t\t<div class="${this.name}--loading-progress-bar-value"></div>\n\t\t\t</div>\n\t\t\t<p class="${this.name}--loading-progress-text">0/${this.totalModules}</p>\n\t\t`,n.appendChild(e),setTimeout((()=>{e.classList.add("shown")}),10)}updateProgress(){this.loadedModules++;const t=document.querySelector(`.${this.name}--loading-progress-bar-value`),n=document.querySelector(`.${this.name}--loading-progress-text`);if(t&&n){const e=this.loadedModules/this.totalModules*100;t.style.width=`${e}%`,n.textContent=`${this.loadedModules}/${this.totalModules}`}}static remove(t){t&&t.fadeOut()}}