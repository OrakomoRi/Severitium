class LoadingScreen{constructor(t){this.name=t,this.fadeSpeed=1,this.isFading=!1,this.stars=[],this.animationFrameId=null,this.canvas=null,this.ctx=null,this.starCount=150,this.lastFrameTime=performance.now()}static add(t){const e=new LoadingScreen(t);return e.init(),e}init(){let t=document.createElement("div");t.className=`${this.name}--loading-screen`,t.innerHTML=`\n\t\t\t<canvas class="${this.name}--night-sky"></canvas><div class="${this.name}--loading-banner"><h3 class="${this.name}--loading-header">${this.name}</h3><p class="${this.name}--loading-text">Loading resources, please wait...</p><p class="${this.name}--loading-text">It can take up to a few minutes to load.</p></div>\n\t\t\t<style>.${this.name}--loading-screen,.${this.name}--loading-screen *{margin:0;padding:0;box-sizing:border-box;}.${this.name}--loading-screen{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;z-index:9999;}.${this.name}--loading-banner{position:absolute;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;text-align:center;padding:.5rem 1rem;background-color:rgba(0,0,0,.25);color:#fff;border:.1rem solid rgb(75,75,75);border-radius:.25rem;backdrop-filter:blur(.5rem);z-index:10000;overflow:hidden;animation:${this.name}--banner-appear ${1/this.fadeSpeed}s ease-in-out}.${this.name}--loading-header{font-size:2.5rem;font-weight:bold}.${this.name}--loading-text{font-size:1.5rem;font-weight:normal}@keyframes ${this.name}--banner-appear{0%{transform:translateX(-100vw) scale(.7);opacity:.7}80%{transform:translateX(0) scale(.7);opacity:.7}100%{transform:scale(1);opacity:1}}@keyframes ${this.name}--banner-disappear{0%{transform:scale(1);opacity:1}20%{transform:translateX(0) scale(.7);opacity:.7}100%{transform:translateX(100vw) scale(.7);opacity:.7}}body{position:relative;height:100wh!important;width:100vw!important;margin:0;overflow:hidden}</style>\n\t\t`,document.body.appendChild(t),this.canvas=document.querySelector(`.${this.name}--night-sky`),this.ctx=this.canvas.getContext("2d"),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,window.addEventListener("resize",(()=>this.resizeCanvas())),this.initStars(),requestAnimationFrame(this.animate.bind(this))}initStars(){for(let t=0;t<this.starCount;t++){let t=2*Math.random()+.5,e=1/t*(.5*Math.random()+.5)/20;this.stars.push({x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,size:t,opacity:.7*Math.random()+.3,baseTwinkleSpeed:e,twinkleSpeed:e})}}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.stars=[],this.initStars()}updateGradient(){const t=this.ctx.createLinearGradient(0,0,0,this.canvas.height);t.addColorStop(0,"rgb(10, 15, 30)"),t.addColorStop(1,"rgb(10, 25, 50)"),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}fadeOut(){const t=document.querySelector(`.${this.name}--loading-banner`);t.style.animation=`${this.name}--banner-disappear ${1/this.fadeSpeed}s ease-in-out`,setTimeout((()=>{t.remove(),this.isFading=!0}),1e3/this.fadeSpeed)}animate(t){const e=(t-this.lastFrameTime)/1e3;this.lastFrameTime=t;const a=this.fadeSpeed*e*60;if(this.updateGradient(),this.stars.forEach((t=>{this.isFading?(t.opacity-=a,t.opacity<0&&(t.opacity=0)):(t.opacity+=t.twinkleSpeed*e*60,t.opacity>=1?(t.opacity=1,t.twinkleSpeed=-t.baseTwinkleSpeed*(.5*Math.random()+.5)):t.opacity<=.3&&(t.opacity=.3,t.twinkleSpeed=t.baseTwinkleSpeed*(.5*Math.random()+.5))),this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.size,0,2*Math.PI),this.ctx.fillStyle=`rgba(255, 255, 255, ${t.opacity})`,this.ctx.fill()})),this.isFading&&this.stars.every((t=>0===t.opacity))){cancelAnimationFrame(this.animationFrameId);const t=document.querySelector(`.${this.name}--loading-screen`);return t.style.transition=`opacity ${1/this.fadeSpeed}s ease-in-out`,t.style.opacity="0",void setTimeout((()=>{t.remove()}),1e3/this.fadeSpeed)}this.animationFrameId=requestAnimationFrame(this.animate.bind(this))}static remove(t){t&&t.fadeOut()}}