class LoadingScreen{constructor(e){this.name=e,this.fadeSpeed=1,this.isFading=!1,this.stars=[],this.animationFrameId=null,this.canvas=null,this.ctx=null,this.starCount=150,this.lastFrameTime=performance.now(),this.language=this.detectLanguage(),this.translations=this.getTranslations(),this.totalModules=0,this.loadedModules=0}detectLanguage(){const e=localStorage.getItem("language_store_key");return e?e.toLowerCase():navigator.language.split("-")[0].toLowerCase()}getTranslations(){const e={en:{loading:"Loading resources, please wait...",wait:"It can take up to a few minutes to load."},ru:{loading:"Загрузка ресурсов, пожалуйста, подождите...",wait:"Это может занять несколько минут."},uk:{loading:"Завантаження ресурсів, будь ласка, зачекайте...",wait:"Це може зайняти кілька хвилин."},nl:{loading:"Bronnen laden, even geduld...",wait:"Het kan een paar minuten duren om te laden."},pl:{loading:"Ładowanie zasobów, proszę czekać...",wait:"Może to potrwać kilka minut."},pt:{loading:"Carregando recursos, por favor, aguarde...",wait:"Isso pode levar alguns minutos para carregar."},de:{loading:"Ressourcen werden geladen, bitte warten...",wait:"Das Laden kann einige Minuten dauern."},ja:{loading:"リソースを読み込んでいます。お待ちください...",wait:"読み込みには数分かかる場合があります。"},es:{loading:"Cargando recursos, por favor espere...",wait:"Puede tardar hasta unos minutos en cargar."},fr:{loading:"Chargement des ressources, veuillez patienter...",wait:"Cela peut prendre quelques minutes."}};return e[this.language]||e.en}static add(e){const t=new LoadingScreen(e);return t.init(),t}init(){let e=document.createElement("div");e.className=`${this.name}--loading-screen`,e.innerHTML=`\n\t\t\t<canvas class="${this.name}--night-sky"></canvas><div class="${this.name}--loading-banner"><h3 class="${this.name}--loading-header">${this.name}</h3><p class="${this.name}--loading-text">${this.translations.loading}</p><p class="${this.name}--loading-text">${this.translations.wait}</p><div class="${this.name}--loading-progress-container"><div class="${this.name}--loading-progress-bar-container"><div class="${this.name}--loading-progress-bar-value"></div></div><p class="${this.name}--loading-progress-text">0/${this.totalModules}</p></div></div>\n\t\t\t<style>.${this.name}--loading-screen,.${this.name}--loading-screen *{margin:0;padding:0;box-sizing:border-box;}.${this.name}--loading-screen{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;z-index:9999;}.${this.name}--loading-banner{position:absolute;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;text-align:center;padding:.5rem 1rem;background-color:rgba(0,0,0,.25);color:#fff;border:.1rem solid rgb(75,75,75);border-radius:.25rem;backdrop-filter:blur(.5rem);z-index:10000;overflow:hidden;animation:${this.name}--banner-appear ${1/this.fadeSpeed}s ease-in-out}.${this.name}--loading-header{font-size:2.5rem;font-weight:bold}.${this.name}--loading-text{font-size:1.5rem;font-weight:normal}@keyframes ${this.name}--banner-appear{0%{transform:translateX(-100vw) scale(.7);opacity:.7}80%{transform:translateX(0) scale(.7);opacity:.7}100%{transform:scale(1);opacity:1}}@keyframes ${this.name}--banner-disappear{0%{transform:scale(1);opacity:1}20%{transform:translateX(0) scale(.7);opacity:.7}100%{transform:translateX(100vw) scale(.7);opacity:.7}}body{position:relative;height:100wh!important;width:100vw!important;margin:0;overflow:hidden}.${this.name}--loading-progress-container{display:flex;align-items:center;justify-content:space-between;gap:.5rem;width:100%;margin-top:.5rem}.${this.name}--loading-progress-bar-container{width:80%;height:.5rem;background:rgba(255,255,255,.2);border-radius:.25rem;overflow:hidden}.${this.name}--loading-progress-bar-value{width:0;height:100%;background:var(--severitium-main-color);transition:width .2s ease}.${this.name}--loading-progress-text{text-align:center;color:#ffffff;margin-top:.25rem}</style>\n\t\t`,document.body.appendChild(e),this.canvas=document.querySelector(`.${this.name}--night-sky`),this.ctx=this.canvas.getContext("2d"),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,window.addEventListener("resize",(()=>this.resizeCanvas())),this.initStars(),requestAnimationFrame(this.animate.bind(this))}initStars(){for(let e=0;e<this.starCount;e++){let e=2*Math.random()+.5,t=1/e*(.5*Math.random()+.5)/20;this.stars.push({x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,size:e,opacity:.7*Math.random()+.3,baseTwinkleSpeed:t,twinkleSpeed:t})}}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.stars=[],this.initStars()}updateGradient(){const e=this.ctx.createLinearGradient(0,0,0,this.canvas.height);e.addColorStop(0,"rgb(10, 15, 30)"),e.addColorStop(1,"rgb(10, 25, 50)"),this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}fadeOut(){const e=document.querySelector(`.${this.name}--loading-banner`);e.style.animation=`${this.name}--banner-disappear ${1/this.fadeSpeed}s ease-in-out`,setTimeout((()=>{e.remove(),this.isFading=!0}),1e3/this.fadeSpeed)}animate(e){const t=(e-this.lastFrameTime)/1e3;this.lastFrameTime=e;const a=this.fadeSpeed*t*60;if(this.updateGradient(),this.stars.forEach((e=>{this.isFading?(e.opacity-=a,e.opacity<0&&(e.opacity=0)):(e.opacity+=e.twinkleSpeed*t*60,e.opacity>=1?(e.opacity=1,e.twinkleSpeed=-e.baseTwinkleSpeed*(.5*Math.random()+.5)):e.opacity<=.3&&(e.opacity=.3,e.twinkleSpeed=e.baseTwinkleSpeed*(.5*Math.random()+.5))),this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.size,0,2*Math.PI),this.ctx.fillStyle=`rgba(255, 255, 255, ${e.opacity})`,this.ctx.fill()})),this.isFading&&this.stars.every((e=>0===e.opacity))){cancelAnimationFrame(this.animationFrameId);const e=document.querySelector(`.${this.name}--loading-screen`);return e.style.transition=`opacity ${1/this.fadeSpeed}s ease-in-out`,e.style.opacity="0",void setTimeout((()=>{e.remove()}),1e3/this.fadeSpeed)}this.animationFrameId=requestAnimationFrame(this.animate.bind(this))}setTotalModules(e){this.totalModules=e;const t=document.querySelector(`.${this.name}--loading-progress-text`);t&&(t.textContent=`0/${this.totalModules}`)}updateProgress(){this.loadedModules++;const e=document.querySelector(`.${this.name}--loading-progress-bar-value`),t=document.querySelector(`.${this.name}--loading-progress-text`);if(e&&t){const a=this.loadedModules/this.totalModules*100;e.style.width=`${a}%`,t.textContent=`${this.loadedModules}/${this.totalModules}`}}static remove(e){e&&e.fadeOut()}}