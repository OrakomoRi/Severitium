# üéØ –†–µ—à–µ–Ω–∏–µ: ThemeSettings —Å —Å–æ–±—ã—Ç–∏–π–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π

## ‚úÖ –†–µ—à—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ Variables.css**
- ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º —á–µ—Ä–µ–∑ fetch (CORS)
- ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ü–∞—Ä—Å–∏–Ω–≥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ CSS —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è –≤ userscript
- üîÑ –ú–µ—Ö–∞–Ω–∏–∑–º: `severitium:requestVariables` ‚Üí –ø–∞—Ä—Å–∏–Ω–≥ –≥–ª–∞–≤–Ω–æ–≥–æ CSS ‚Üí `severitium:variablesResponse`

### 2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ GM_setValue**
- ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: GM_setValue –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤ userscript –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
- ‚úÖ –†–µ—à–µ–Ω–∏–µ: –°–æ–±—ã—Ç–∏–π–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ userscript
- üîÑ –ú–µ—Ö–∞–Ω–∏–∑–º: `severitium:saveThemeSettings` ‚Üí GM_setValue –≤ userscript –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–µ—à–∞ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏**
- ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –∫–µ—à SeveritiumCSS
- ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ + —Å–æ–±—ã—Ç–∏–π–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–µ—à–∞
- üîÑ –ú–µ—Ö–∞–Ω–∏–∑–º: –ò–∑–º–µ–Ω–µ–Ω–∏–µ ‚Üí DOM update ‚Üí `severitium:updateThemeCache` ‚Üí GM_setValue

### 4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –±–∏–ª–¥-—Å–∏—Å—Ç–µ–º—ã (1 JS + 1 CSS –Ω–∞ –º–æ–¥—É–ª—å)**
- ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ª—å–∑—è —Ä–∞–∑–±–∏–≤–∞—Ç—å –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–±–æ—Ä–∫–∏ —á–µ—Ä–µ–∑ –∞–ª—Ñ–∞–≤–∏—Ç–Ω—É—é —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É —Ñ–∞–π–ª–æ–≤

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    CustomEvents    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ThemeSettings  ‚îÇ ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇ ThemeIntegration‚îÇ
‚îÇ  (–æ–±—ã—á–Ω—ã–π JS)   ‚îÇ                    ‚îÇ  (userscript)   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚Ä¢ UI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  ‚îÇ                    ‚îÇ ‚Ä¢ GM_setValue   ‚îÇ
‚îÇ ‚Ä¢ –í–∞–ª–∏–¥–∞—Ü–∏—è     ‚îÇ                    ‚îÇ ‚Ä¢ GM_getValue   ‚îÇ
‚îÇ ‚Ä¢ DOM –∞–ø–¥–µ–π—Ç—ã   ‚îÇ                    ‚îÇ ‚Ä¢ –ü–∞—Ä—Å–∏–Ω–≥ CSS   ‚îÇ
‚îÇ ‚Ä¢ localStorage  ‚îÇ                    ‚îÇ ‚Ä¢ –ö–µ—à –∞–ø–¥–µ–π—Ç—ã   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏)

```
src/Settings/ThemeSettings/
‚îú‚îÄ‚îÄ ThemeCache.js          # 1Ô∏è‚É£ –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º
‚îú‚îÄ‚îÄ ThemeIntegration.js    # 2Ô∏è‚É£ –ú–æ—Å—Ç —Å userscript
‚îú‚îÄ‚îÄ ThemeSettings.css      # 3Ô∏è‚É£ –°—Ç–∏–ª–∏
‚îî‚îÄ‚îÄ ThemeSettings.js       # 4Ô∏è‚É£ –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å (–ø–æ—Å–ª–µ–¥–Ω–∏–º)
```

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:
1. `ThemeIntegration.js` —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –≤ userscript
2. `ThemeSettings.js` –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `severitium:requestVariables`
3. Userscript –ø–∞—Ä—Å–∏—Ç Variables.css –∏–∑ –∫–µ—à–∞ –∏ –æ—Ç–≤–µ—á–∞–µ—Ç
4. –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–ª–∏ –¥–µ—Ñ–æ–ª—Ç—ã

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç —Ü–≤–µ—Ç –≤ UI
2. –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `document.documentElement.style.setProperty()`
3. –î–µ–±–∞—É–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ `severitium:updateThemeCache`
4. Userscript –æ–±–Ω–æ–≤–ª—è–µ—Ç `SeveritiumCSS['theme-variables']`

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:
1. –ù–∞–∂–∞—Ç–∏–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
2. –°–æ–±—ã—Ç–∏–µ `severitium:saveThemeSettings`
3. Userscript —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `GM_setValue('SeveritiumThemeSettings')`
4. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ localStorage –∫–∞–∫ fallback

## üõ°Ô∏è –°–∏—Å—Ç–µ–º–∞ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏

### Fallback #1: Hardcoded –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```javascript
getFallbackVariables() {
    return {
        '--severitium-main-color': 'rgb(233, 67, 67)',
        // ... –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ Variables.css
    };
}
```

### Fallback #2: localStorage
```javascript
// –ï—Å–ª–∏ GM —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
if (typeof localStorage !== 'undefined') {
    localStorage.setItem('SeveritiumThemeSettings', JSON.stringify(settings));
}
```

### Fallback #3: –ü—Ä—è–º–æ–µ DOM –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
```javascript
// –í—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –¥–∞–∂–µ –±–µ–∑ –∫–µ—à–∞
document.documentElement.style.setProperty(variable, value);
```

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

1. **–ù–µ –Ω—É–∂–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å userscript** - –≤—Å—ë —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è
2. **–†–∞–±–æ—Ç–∞–µ—Ç —Å CORS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏** - –Ω–µ—Ç –ø—Ä—è–º—ã—Ö fetch –∑–∞–ø—Ä–æ—Å–æ–≤
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–∏–ª–¥–∏—Ç—Å—è** - GitHub Actions –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã
4. **–ë—ã—Å—Ç—Ä—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** - –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
5. **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ fallback —Å–∏—Å—Ç–µ–º—ã
6. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–µ—à–∞:
```javascript
// –ë—ã–ª–æ:
SeveritiumCSS = {
    'main': '/* –æ—Å–Ω–æ–≤–Ω–æ–π CSS */'
}

// –°—Ç–∞–ª–æ:
SeveritiumCSS = {
    'main': '/* –æ—Å–Ω–æ–≤–Ω–æ–π CSS */',
    'theme-variables': ':root { --severitium-main-color: rgb(233,67,67); }'
}
```

### –ù–æ–≤—ã–µ GM –∫–ª—é—á–∏:
- `SeveritiumThemeSettings` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `SeveritiumThemeCacheVersion` - –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–µ—à–∞ —Ç–µ–º—ã

## üé® UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **–¶–≤–µ—Ç–æ–≤—ã–µ –ø–∏–∫–µ—Ä—ã** —Å hex/rgb –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π
- **–¢–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è** —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —Ñ–æ—Ä–º–∞—Ç–∞
- **–ü–æ–ª–∑—É–Ω–∫–∏** –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- **–≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- **–ö–Ω–æ–ø–∫–∏ —Å–±—Ä–æ—Å–∞** –∫ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

‚úÖ **–ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ Variables.css:**
- Main colors (1 –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è)
- Text colors (12 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö) 
- Highlighting colors (4 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
- Background colors (8 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)
- Additional colors (13 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)
- Button colors (15 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)
- Battle tab colors (8 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)
- Metrics (1 –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è)

**–ò—Ç–æ–≥–æ: 62 –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

- ‚úÖ –ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –±–∏–ª–¥-—Å–∏—Å—Ç–µ–º–æ–π
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç—ã
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –°–æ–±—ã—Ç–∏—è –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π

**–ú–æ–¥—É–ª—å –≥–æ—Ç–æ–≤ –∫ –∫–æ–º–º–∏—Ç—É –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–µ!**
